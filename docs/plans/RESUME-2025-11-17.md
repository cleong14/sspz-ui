# SSP Generator - Resume Point (2025-11-17)

## Current Status

**Branch:** `feat/ssp-generator`
**PR:** https://github.com/aquia-inc/sspz-ui/pull/9
**Working Directory:** `/Users/chaz/projects/cleong14/sspz-ui/ssp-generator`

### Completed (Phase 1 - Tasks 1-7)

âœ… **Task 1:** Core Type Definitions (OSCAL, SSP, Tools, AI Provider)
âœ… **Task 2:** OSCAL Catalog Data & Loading Service
âœ… **Task 3:** Tool Mappings Data & Service (Semgrep, Gitleaks, Grype)
âœ… **Task 4:** Coverage Calculation Service
âœ… **Task 5:** SSP Project Context (React Context)
âœ… **Task 6:** IndexedDB Service for Draft Persistence
âœ… **Task 7:** Wizard Step 1 - Project Basics Component

**Tests:** 241 passing, 66 test suites
**Code Reviews:** All 7 tasks reviewed and approved
**Commits:** 7 clean commits, all pushed to remote

### Architecture Summary

```
Foundation Layer (Complete):
â”œâ”€â”€ Type Definitions
â”‚   â”œâ”€â”€ OSCAL types (catalogs, controls, baselines)
â”‚   â”œâ”€â”€ SSP types (projects, characteristics, implementations)
â”‚   â”œâ”€â”€ Tool types (mappings, coverage)
â”‚   â””â”€â”€ AI Provider types (interfaces for future)
â”œâ”€â”€ Services
â”‚   â”œâ”€â”€ oscal-catalog.ts (load catalog, filter by baseline)
â”‚   â”œâ”€â”€ tool-mappings.ts (load tools, filter by category)
â”‚   â”œâ”€â”€ coverage-calculator.ts (calculate control coverage)
â”‚   â””â”€â”€ indexeddb.ts (persist drafts)
â”œâ”€â”€ State Management
â”‚   â””â”€â”€ SSPProjectContext.tsx (React Context with 8 actions)
â””â”€â”€ UI Components
    â””â”€â”€ ProjectBasicsStep.tsx (Wizard Step 1 with validation)
```

## Recommended Next Steps

### Priority 1: Complete Quick Start Wizard MVP

**Implement Tasks 8-11 to finish the wizard:**

1. **Task 8:** Baseline Selection Step
   - Choose Low/Moderate/High baseline
   - Show control count preview
   - Display which controls are in each baseline

2. **Task 9:** Tool Selection Step
   - Display 3 pre-mapped tools (Semgrep, Gitleaks, Grype) as cards
   - Show real-time coverage preview as tools are selected
   - Support custom tool upload

3. **Task 10:** Control Review Step
   - Table view of all baseline controls
   - Show coverage status (covered/partial/uncovered)
   - Color-coded status indicators
   - Filters by status and family

4. **Task 11:** AI Description Generation Step
   - List controls needing descriptions
   - "Generate All" and individual "Generate" buttons
   - Accept/Edit/Regenerate/Reject actions
   - (Note: Can stub AI for now, implement real provider later)

5. **Wire Up Wizard Flow:**
   - Create parent WizardContainer component
   - Manage step progression (1â†’2â†’3â†’4â†’5)
   - Step indicator UI
   - Persist to IndexedDB after each step
   - "Review & Export" final step

### Priority 2: Enable OSCAL Export

**Implement Task 19 for actual output:**

- Build OSCAL SSP export service
- Map SSPProject to OSCAL SSP schema
- Export as JSON (primary) and XML (optional)
- Download file with proper filename

### Result: Functional MVP

After these tasks, users can:

1. Create a new SSP project (wizard step 1) âœ…
2. Select security baseline (step 2) ðŸ”œ
3. Select security tools (step 3) ðŸ”œ
4. Review control coverage (step 4) ðŸ”œ
5. Generate descriptions (step 5) ðŸ”œ
6. Export OSCAL-compliant SSP ðŸ”œ

---

## How to Resume

### One-Line Prompt for New Chat:

```
Continue SSP Generator from docs/plans/RESUME-2025-11-17.md - implement Priority 1 (Tasks 8-11 + Wizard Container) using writing-plans and subagent-driven-development
```

### What This Will Do:

1. Read this resume document to understand current state
2. Use `writing-plans` skill to create detailed implementation plan for:
   - Task 8: BaselineSelectionStep component
   - Task 9: ToolSelectionStep component
   - Task 10: ControlReviewStep component
   - Task 11: AIDescriptionStep component (with stub)
   - Wizard container with step progression
3. Use `subagent-driven-development` to execute plan task-by-task with reviews
4. Result: Complete wizard flow ready for testing

### Alternative: Smaller Scope

If you want to implement just one step at a time:

```
Continue SSP Generator - implement Task 8 (Baseline Selection Step) using writing-plans and subagent-driven-development
```

---

## Technical Context for Next Implementation

### Files You'll Need to Create:

```
src/components/wizard/
â”œâ”€â”€ WizardContainer.tsx          (NEW - orchestrates all steps)
â”œâ”€â”€ BaselineSelectionStep.tsx    (NEW - Task 8)
â”œâ”€â”€ ToolSelectionStep.tsx        (NEW - Task 9)
â”œâ”€â”€ ControlReviewStep.tsx        (NEW - Task 10)
â”œâ”€â”€ AIDescriptionStep.tsx        (NEW - Task 11)
â””â”€â”€ __tests__/
    â”œâ”€â”€ WizardContainer.test.tsx
    â”œâ”€â”€ BaselineSelectionStep.test.tsx
    â”œâ”€â”€ ToolSelectionStep.test.tsx
    â”œâ”€â”€ ControlReviewStep.test.tsx
    â””â”€â”€ AIDescriptionStep.test.tsx
```

### Services Available to Use:

```typescript
// From Task 2: OSCAL Catalog
import { loadCatalog, getBaselineControls } from '../services/oscal-catalog'

// From Task 3: Tool Mappings
import { loadToolMappings, getToolsByCategory } from '../services/tool-mappings'

// From Task 4: Coverage Calculator
import { calculateControlCoverage } from '../services/coverage-calculator'

// From Task 5: State Management
import { useSSPProject } from '../contexts/SSPProjectContext'

// From Task 6: Persistence
import { saveProject, loadProject, listProjects } from '../services/indexeddb'
```

### Context Actions Available:

```typescript
const {
  project, // Current SSP project state
  updateSystemCharacteristics, // Used in Step 1 âœ…
  setControlBaseline, // Use in Step 2 (Task 8)
  addSelectedTool, // Use in Step 3 (Task 9)
  removeSelectedTool, // Use in Step 3 (Task 9)
  updateControlImplementation, // Use in Step 5 (Task 11)
  addResponsibleParty,
  resetProject,
  loadProject,
} = useSSPProject()
```

### Key Design Patterns to Follow:

1. **TDD Approach:** Write tests first, see them fail, implement, see them pass
2. **Material-UI Components:** Use consistent styling with existing Step 1
3. **React Hook Form:** Use for any forms that need validation
4. **Context Integration:** Each step updates SSPProjectContext
5. **Auto-save:** Save to IndexedDB after each step completes
6. **Type Safety:** All components strictly typed with TypeScript

---

## Additional Notes

### Data Currently Available:

- **OSCAL Catalog:** Stub with 2 AC controls (ac-1, ac-2, ac-2.1)
  - For real testing, you'll want the full catalog eventually
  - Stub is sufficient for wizard implementation

- **Tool Mappings:** 3 tools with real control mappings
  - Semgrep: 4 controls (si-10.1, si-11.1, ac-3.1, sc-28.1)
  - Gitleaks: 3 controls (ia-5.1, ia-5.2, sc-12.1)
  - Grype: 3 controls (si-2.1, si-2.2, ra-5.1)

- **Coverage Calculation:** Fully functional
  - Returns coverage status for each control
  - Stats: total, covered, partial, uncovered

### Testing Strategy:

- Each component should have 4-6 tests minimum
- Test rendering, validation, user interactions, and callbacks
- Use `@testing-library/react` with `userEvent`
- Mock fetch calls for catalog/tool loading in tests
- All tests should pass before committing

### Git Workflow:

- Stay on `feat/ssp-generator` branch
- One commit per task (8, 9, 10, 11, wizard container)
- Code review after each task using `superpowers:code-reviewer`
- Push to PR #9 when complete

---

## Success Criteria

You'll know the next phase is complete when:

1. âœ… All 5 wizard steps render and function
2. âœ… User can navigate through entire wizard (1â†’2â†’3â†’4â†’5)
3. âœ… Each step persists data to SSPProjectContext
4. âœ… Project auto-saves to IndexedDB after each step
5. âœ… Coverage calculation updates in real-time as tools are selected
6. âœ… All new tests pass (expect ~30+ new tests)
7. âœ… Can export OSCAL SSP from completed wizard

Ready to continue building! ðŸš€
